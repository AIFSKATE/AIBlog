@page "/admin/posts"
@page "/admin/posts/{page:int}"


<AdminLayout>
    @if (PostsData == null)
    {
        <Loading />
    }
    else
    {
        <div class="post-wrap archive">
            <NavLink style="float:right" href="/admin/post"><h3>📝~~~ 新增文章 ~~~📝</h3></NavLink>
            @if (PostsData.Posts.Any())
            {
                <h3>Posts</h3>
                @foreach (var item in PostsData.Posts)
                {
                    <article class="archive-item">
                        <NavLink title="❌删除" @onclick="@(async () => await DeleteAsync(item.Id))">❌</NavLink>
                        <NavLink title="📝编辑" @onclick="@(async () => await Utils.NavigateTo($"/admin/post/{item.Id}"))">📝</NavLink>
                        <NavLink target="_blank" class="archive-item-link" href="@($"/post/{item.Id}")">@item.Title</NavLink>
                        <span class="archive-item-date">@item.CreationTime</span>
                    </article>
                }
                <nav class="pagination">
                    @for (int i = 1; i <= TotalPage; i++)
                    {
                        var _page = i;

                        if (page == _page)
                        {
                            <span class="page-number current">@_page</span>
                        }
                        else
                        {
                            <a class="page-number" @onclick="@(() => RenderPage(_page))">@_page</a>
                        }
                    }
                </nav>
            }
            else
            {
                <ErrorTip />
            }
        </div>
    }
</AdminLayout>